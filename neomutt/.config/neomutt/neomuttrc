set folder = ~/Mail/
set spoolfile = +cern/Inbox
set abort_noattach=ask-yes

bind index,pager S noop
bind index,pager A noop
bind index,pager I noop

# named-mailboxes commands using empty folders. Not linked to those specific folders, I just
# couldn't find another way to get it to work, even making my own folders.
named-mailboxes "───────────────────" =cern/Calendar
named-mailboxes "CERN Mail" =cern/Tasks
mailboxes =cern/Inbox =cern/Icinga =cern/eLogs =cern/JIRA =cern/Archive =cern/Sent =cern/Spam =cern/Deleted
#mailboxes `find ~/Mail/cern/* -maxdepth 0 -type d | grep -v "tmp\|new\|cur" | sed 's|/home/harry/Mail/|=\"|g' | sed 's|$|\"|g' | tr '\n' ' '`
named-mailboxes "───────────────────" =aol/Notes
named-mailboxes "Personal Mail" =aol/Unwanted
#mailboxes =PERSONAL
mailboxes =aol/Inbox =aol/Archive =aol/Sent =aol/Spam =aol/Deleted
named-mailboxes "───────────────────" =aol/Saved
folder-hook cern/* source ~/.config/neomutt/cern.neomuttrc
folder-hook aol/* source ~/.config/neomutt/aol.neomuttrc

set index_format = "%4C %Z %[%b %d] %-15.15L %XA %s"

set sort = reverse-date
set editor = "vim"

bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager \Cl sidebar-open

# paths
set header_cache = ~/.config/neomutt/cache/headers
set message_cachedir = ~/.config/neomutt/cache/bodies
set certificate_file = /etc/ssl/certs/ca-bundle.trust.crt
set mailcap_path = ~/.config/neomutt/mailcap
set tmpdir = ~/.config/neomutt/tmp

# basic options
set wait_key = no
set mbox_type = Maildir
set timeout = 3
set mail_check = 0
#set delete //uncomment this when I've got the hang of everything
set quit
set thorough_search
set mail_check_stats
unset confirmappend
unset move
unset mark_old
unset beep_new

#text formatting
set send_charset = "utf-8:iso-8859-1:us-ascii"
set charset = "utf-8"
alternative_order text/plain text/enriched text/html
auto_view text/html

#bindings
macro attach 'V' "<pipe-entry>iconv -c --to-code=UTF8 > ~/.tmp/mail.html<enter><shell-escape>$BROWSER ~/.tmp/mail.html<enter>" "Open html in browser"
macro index,pager V "<view-attachments><search>html<enter>V<exit>" "Open html in browser"
macro pager U "<pipe-message>urlscan<enter>" "Pipe message to urlscan"
macro pager \ca "<pipe-message> ripmime -i - -d ~/Downloads/attachments && rm ~/Downloads/attachments/textfile*<enter>" "Save all non-text attachments using ripmime"

bind index k previous-entry
bind index j next-entry
bind pager K previous-entry
bind pager J next-entry
bind pager k previous-line
bind pager j next-line
bind generic l select-entry
bind index l display-message
bind pager l view-attachments
bind attach l view-mailcap
bind pager,attach,browser h exit
bind index h noop
bind index L limit
bind index,pager g noop
bind index,pager \cu half-up
bind index,pager \cd half-down
bind generic,index,pager \cf       next-page
bind generic,index,pager \cb       previous-page
bind pager gg top
bind index gg first-entry
bind pager G bottom
bind index G last-entry
bind index <tab> sync-mailbox
macro index <f2> "<shell-escape>mailsync-monitor<enter>"
macro attach s "<save-entry><bol>~/Downloads/attachments/"
macro index,pager \cF "<shell-escape>handleforwarded<enter>"
bind pager R group-reply

bind index,pager <F10> sidebar-toggle-visible
macro index,pager <F11> ':set pager_index_lines=`dc -e "10 $pager_index_lines -p"`<enter>'

#move mailbox
bind index gp noop
bind index gw noop
macro index gwi "<change-folder>+cern/Inbox<enter>"
macro index gwe "<change-folder>+cern/Icinga<enter>"
macro index gwl "<change-folder>+cern/eLogs<enter>"
macro index gwa "<change-folder>+cern/Archive<enter>"
macro index gws "<change-folder>+cern/Sent<enter>"
macro index gwj "<change-folder>+cern/Spam<enter>"
macro index gwd "<change-folder>+cern/Deleted<enter>"
macro index gpi "<change-folder>+aol/Inbox<enter>"
macro index gpa "<change-folder>+aol/Archive<enter>"
macro index gps "<change-folder>+aol/Sent<enter>"
macro index gpj "<change-folder>+aol/Spam<enter>"
macro index gpd "<change-folder>+aol/Deleted<enter>"

#other
hdr_order from to cc date subject 

#sidebar
set sidebar_visible
bind index,pager B sidebar-toggle-visible
set sidebar_short_path
set sidebar_delim_chars="/"
set sidebar_folder_indent
set sidebar_indent_string=" "
set sidebar_width = 20
set sidebar_format = "%D %?F?[%F]?%* %?N?%N?"
color sidebar_new red default

alias example Example Person <example.person@email.server>
# vim:ft=neomuttrc
